<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=GB2312" />
		<title>PIM-UserUI</title>
		<script type="text/javascript" src="js/jquery-1.5.1.min.js"></script>
        <script type="text/javascript" src="js/jquery-calendar.js"></script>
		<script type="text/javascript" src="js/jquery-ui-1.8.14.custom.min.js"></script>
        <script type="text/javascript" src="js/pim-core.js"></script>

		<link rel="stylesheet" type="text/css" href="css/ui-lightness/jquery-ui-1.8.14.custom.css">
        <link rel="stylesheet" type="text/css" href="css/jquery-calendar.css">
		
		<style type="text/css">
			body 				{	margin: 50px;	font-size: 12px;}
			span.button 		{	text-decoration: underline;	cursor: pointer;}
			select.targetlist 	{	height: 180px;	width: 600px;}
			textarea.targetdesc {	height: 180px;	width: 300px;}
        </style>	
        
		<script type="text/javascript">
			$(function(){

				// Set the Date and Time dailog
				$(".calendarFocus").calendar();
				
				$("#newreqeust").hide(); // Hide the new request main forms.				
				$("#newr").click( function () { 
					if($(this).text()=="New PIM Request")
					{
						$("#newreqeust").show();
						$(this).text("Hide PIM Request");
					}else{
						$("#newreqeust").hide();
						$(this).text("New PIM Request");
					}
				
				});
				
				// get history (pim-core.js)
				var ret = gethistory('recoder.xml');
				$("#historys").append(ret);
				
				// Query submit. to search the service name and private account.
				
				$('#selection').submit(function() {
					var abc= getserveraccount('resource.xml');
					if(abc.length>0)
					{
						$("#selectionret").empty();
						$("#selectionret").append(abc);
					}
					// add the click function here.
					$('button').click(function() {
					
						var isok=false;
					
						var addval=$(this).attr("name");  // 准备添加的值
						
						// 检查select中是否已经存在该值，存在则忽略。
						$("#mainlist > option").each(function(i){
							var val1=$(this).val();  // 遍历值
							if(addval == val1){ isok=true;};

						});
						
						if(!isok){  // 如果列表框中没有重复的，就添加。
						
							$("#mainlist").append("<option value="+addval+">"+addval+"</option>"); 
						}
					});
					return false;
				});

				// Dynimic add the selection box.
				
				
				// submit the backend servlet to run the real process.
				
				$('#MainForm').submit(function() {
					
					$("#mainlist > option").each(function(){
						alert($(this).val()+"  Submitting ........");
						// Here need add the real action to submit for each resource.
					});
					
					return false;
				});
				
				// this function for delete some no use options， 删除已经选择的内容，可删除多选
				
				$('#maindelete').click(function() {
					$("#mainlist option:selected").remove(); 
				});
				
				
			});

		</script>

	</head>
	
  <body>
    <!-- Welcome Page -->
    <div id="Welcompart">
		<h1>Hello test1, Welcome to PIM Center!	[<a href="">LOGOUT</a>]</h1>
		<h1>The following are your Application recoder: [<span class="button">&lt;</span> 
			<span class="button">&lt;&lt;</span> 
			<span class="button">&gt;&gt;</span> 
			<span class="button">&gt;</span> 
			Page:<input name="cols" type="text" size="2" id="calendar1" value="1"> 
			<span class="button">Go</span> 
			]  <span class="button">Refresh</span>  </h1>
    </div>
    
    <!-- Welcome Page END -->
	
	<!-- HISTORY PAGE, Here will be insert a table. -->
    <div id="historys"></div>
	
	
	<h1><span id="newr" class="button">New PIM Request</span></h1>
	
    <!-- NEW REQUEST PART -->
	<div id="newreqeust">
		
		<!-- New Request Main form -->
		<div id="mainform">
			请选择特权帐号资源和独占的时间段<BR>
			<form action="" id="MainForm" name="MainForm" method="post">
				<select multiple id="mainlist" class="targetlist">
				</select>
				<input type="button" name="delete" id="maindelete" value="Delete">
				<textarea name="textarea2" id="textarea2" cols="45" rows="10" class="targetdesc">这里填写，申请的理由，及与此申请相关的信息</textarea>
				<input type="submit" name="add6" id="add6" value="Submit">
			</form>
		</div>
		<!-- New Request Main form END -->
		
		
		<!-- Search Part --> 
		<P></P>
		<div id="selections">
		<form action="" id="selection" name="selection" method="post">
		Any Account/IP/Hostname or  * for ALL  
					<input type="text" name="qureystr" id="qureystr" value=""> 
			From    <input type="text" name="fromtime" id="fromtime" value="" class="calendarFocus">
			TO		<input type="text" name="totime" id="totime" value="" class="calendarFocus">
					<input type="checkbox" name="status" id="status">Any Status. 
					<input type="submit" name="querysubmit" id="querysubmit" value="Query">
		</form>
		</div>
		<P></P>
		<!-- Search Part END --> 
	
	
		<!-- Selection result -->
		<div id="selectionret"></div>


	
	</div>  <!-- END NEWREQUEST-->

	
  </body>
</html>


